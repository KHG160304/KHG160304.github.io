---
title: (10) C언어 메모리 레이아웃
excerpt: C언어의 메모리 레이아웃에 대해 알아보자
categories: 
  - 게임서버 과정
permalink: /game-server-curriculum/:title
toc: true
toc_sticky: true
typora-root-url: ../../
---



## 데이터 영역(.data)

1. 전역변수, static 키워드가 선언된 지역변수 중에 0이 아닌 값으로 초기화된 변수의 값이 저장되는 영역입니다.
2. 프로그램 시작과 동시에 초기화됩니다.
3. 읽기와 쓰기가 가능한 메모리 공간입니다.
4. 이 영역은 이미지를 뜬 것처럼, 실행 파일에 존재하며 프로그램 실행할 때에도 이미지를 그대로 메모리에 복사한다.
5. static 지역변수, 전역변수가 많을수록 데이터 영역의 크기가 커지며, 실행 파일의 크기도 커진다.
6. char*가 가리키는 문자열 상수는 .rodata(readonly) 영역에 저장되고, 문자열 상수의 주소 값이 .data 영역에 저장됩니다.
7. char 배열에 저장된 문자열은 .data 영역에 그대로 저장됩니다.
8. .data 영역의 크기는 런타임에 변경되지 않습니다.



## 코드 영역(.txt, .code)

1. 바이너리 코드가 저장되는 영역입니다.
2. 읽기 및 실행만 가능한 영역입니다.
3. 쓰기를 하려고하면, 바로 에러가 발생합니다.
4. 실행 파일의 대부분을 차지합니다.



## Read Only 데이터 영역(.rodata)

1. 데이터 영역에서 오직 읽기만 가능한 영역 입니다.
2. 보통 문자열 상수가 저장됩니다.



## BSS(Block Symbol State) 영역(.bss)

1. static 변수 및 전역변수 중 초기화하지 않거나 0으로 초기화된 변수들의 값이 저장되는 영역입니다.
2. 실행 파일에는 존재하지 않고 오직 런타임에만 생성되는 영역입니다.
3. 프로그램 시작할 때 한번 0으로의 초기화를 보장합니다.
4. c-runtime 이 동작하고, invoke_main 이전에 0으로 초기화됩니다.
5. 0이 아닌 값이 존재한다면, 누군가 .bss 영역에 접근한 것으로 간주할 수 있습니다.



## 스택 영역

1. 지역변수가 저장되는 공간입니다.
2. 함수 호출할 때 함수의 인자 값이 저장되는 공간입니다.
3. 일반적으로 기본 1mb의 크기를 가집니다.
4. 함수마다 자신의 스택 메모리에 자신을 공간을 확보합니다.
5. 스택 메모리의 할당 및 해제의 주체는 OS입니다.(프로그래머가 아닙니다.)
6. 1mb 이상의 메모리 공간이 필요할 때 힙 메모리를 사용합니다.
7. thread 1개 당 1개의 스택 메모리 공간을 가집니다.



## 힙 영역

1. 프로그래머의 필요에 따라서, 원하는 만큼 OS 요청해서 할당받고 필요 없으면 해제할 수 있는 메모리 공간입니다.
2. 메모리 관리의 주체는 프로그래머이다.
3. 프로그래머의 실수로, 다 사용한 메모리를 그때그때 해제하지 않으면, 메모리 누수를 일으키기 쉽습니다.
4. 힙 메모리를 잘못 사용한 책임은 모두 프로그래머에게 있습니다.
