---
title: (7) 연산자와 우선순위(feat.비트, 캐스팅, 삼항 연산자)
excerpt: 비트 연산자, 캐스팅 연산자, 삼항 연산자 및 우선순위를 알아보자
categories: 
  - 게임서버 과정
permalink: /game-server-curriculum/:title
toc: true
toc_sticky: true
typora-root-url: ../../
---

[toc]

## 비트 연산자란?

메모리에 비트 단위의 연산을 수행하는 연산자이다.

### 비트 AND 연산자

- 비트 AND 연산자의 형태는 `&` 입니다. 
- 동일한 크기의 두 메모리의 각 비트끼리 비교합니다. 
- 비교하는 두 비트 모두 값이 1이면 결과는 `1` 이며, 둘 중 하나라도 값이 `0` 이면 결과는 `0` 입니다.

### 비트 OR 연산자

- 비트 OR 연산자의 형태는 `|(파이프)` 입니다. 
- 동일한 크기의 두 메모리의 각 비트끼리 비교합니다. 
- 비교하는 두 비트 중 하나라도 값이 `1` 이면 결과는 `1` 이며, 둘 모두 값이 `0` 이면 결과는 `0` 입니다.

### 비트 NOT 연산자

- 비트 OR 연산자의 형태는 `~` 입니다. 
- 비트 연산자 중 유일한 당한 연산자 입니다. 
- 비트 값이 1이면 0으로 0이면 1로 값을 반전 시킵니다.

### 비트 XOR 연산자

- 비트 XOR 연산자의 형태는 `^` 입니다. 
- 동일한 크기의 두 메모리의 각 비트끼리 비교합니다. 
- 비교하는 두 비트의 값이 같으면 결과 값은 0, 다르면 결과 값은 1 입니다.

### 비트 오른쪽 시프트 연산자

- 비트 오른쪽 시프트 연산자의 형태는 `>>` 입니다. 

- 부호있는 변수를 대상으로 short자료형에서 int로 변수 변경시 movsx 연산이 발생합니다.
  부호 비트가 1인 경우, 추가되는 비트는 모두 1로 채워집니다.

- 부호없는 변수는 movzx 연산이 발생합니다.

- 상수에 오른쪽 시프트 연산을 할 때, movzx 연산의 결과 값이 어셈블리 코드에 삽입됩니다.

- 상수를 부호있는 타입으로 캐스팅하고, 오른쪽 시프트 연산을 할때, movsx 연산의 결과 값이 어셈블리 코드에 삽입됩니다.

  > movsx: mov sign extention
  > movzx: mov zero extention

### 비트 연산자의 장점

1. 비트 단위로 데이터를 다룰 수 있어, 사용하는 메모리의 양이 작습니다.
2. 기본적인 자료형은 byte 단위인데, byte 단위의 변수 하나에 다양한 정보를 저장할 수 있습니다.
3. 4byte(32비트) int 변수 하나에 16비트 데이터 2개를 저장할 수 있습니다.

### 비트 연산자의 활용법

1. 암복호화할 때, 또는 GDI 프로그래밍에서 xor 연산을 많이 쓴다.
   0xDFD7B02C xor 0xFFFFF184 = 0x101841A9
   0x101841A9 xor 0xFFFFF184 = 0xDFD7B02C
2. 어셈블리에서 xor 연산자 활용한다.
   xor ebp, ebp : ebp 레지스터를 0으로 초기화한다. 1단계면 0이된다.
   mov ebp, 0 : mov 연산은 느리다. 0을 읽어서 복사 2단계를 거친다.

## 삼항 연산자

삼항 연산자의 형태는 ('1' == '1') ? 1 : 0 와 같은 형태입니다. ('1' == '1') 조건문의 결과가 참이면 숫자 1을 거짓이면 숫자 0을 결과 값으로 반환하는 형태입니다.

어셈블리 코드에서 확인해보면 cmp 및 jump 명령어들로 구성되어 있는데 if {...} else {...} 문도 비슷한 명령어로 구성됩니다.

## 캐스팅 연산자

특정 변수에 캐스팅 연산자를 적용하면, 이 변수는 프로그래머가 의도적으로 변수의 타입을 캐스팅 연산자에 명시한 타입으로 사용하려고 한다고, 컴파일러에게 알려주는 용도입니다. 프로그래머가 충분히 인지하고 있으니 이대로 컴파일을 해달라는 의미입니다.

생성되는 어셈블리 코드 상에서 실제로, 캐스팅 연산자를 붙인 것과 안 붙인 것의 차이는 없습니다.

정수형 변수를 실수형으로 캐스팅하는 경우에는 정수를 실수로 바꾸는 함수를 호출하는 어셈블리 코드가 삽입됩니다.

> 크기가 다른 타입으로 캐스팅하는 경우, 데이터가 손실될 수 있으니 주의가 필요합니다.

## 연산자 우선순위

| 우선순위 | 연산자                                                       | 설명                                                         |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1 순위   | ++<br />--<br />()<br />[]<br />.<br />->                    | 후위 증가<br />후위 감소<br />함수 호출<br />배열 첨자<br />구조체 멤버 선택<br />포인터를 통한 구조체 멤버 선택 |
| 2 순위   | !<br />~<br />+<br />-<br />++<br />--<br />*<br />&<br />sizeof | 논리 NOT 연산자<br />비트 NOT 연산자<br />양의 부호<br />음의 부호<br />전위 증가<br />전위 감소<br />역참조 연산자<br />주소 연산자<br />크기 연산자(컴파일 타임) |
| 3 순위   | (type)                                                       | 형식 캐스팅 연산자                                           |
| 4 순위   | *<br />/<br />%                                              | 곱셉<br />나눗셈 몫<br />나눗셈 나머지                       |
| 5 순위   | +<br />-                                                     | 덧셈 연산자<br />뺄셈 연산자                                 |
| 6 순위   | <<<br />>>                                                   | 왼쪽 시프트 연산자<br />오른쪽 시프트 연산자                 |
| 7 순위   | <<br /><=<br />><br />>=                                     | 관계 연산자                                                  |
| 8 순위   | ==<br />!=                                                   | 관계연산 동등비교 판별 연산자                                |
| 9 순위   | &                                                            | 비트 AND 연산자                                              |
| 10 순위  | ^                                                            | 비트 xor 연산자                                              |
| 11 순위  | \|                                                           | 비트 or 연산자                                               |
| 12 순위  | &&                                                           | 논리 AND 연산자                                              |
| 13 순위  | \|\|                                                         | 논리 OR 연산자                                               |
| 14 순위  | ?:                                                           | 조건식(삼항) 연산자                                          |
| 15 순위  | =<br />+=<br />-=<br />*=<br />/=                            | 할당 연산자<br />복합 대입 연산자                            |
| 16 순위  | ,                                                            | 콤마 연산자                                                  |

