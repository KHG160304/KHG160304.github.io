---
title: (13) 배열
excerpt: 배열과 활용법에 대해서 알아보자
categories: 
  - 게임서버 과정
permalink: /game-server-curriculum/:title
toc: true
toc_sticky: true
typora-root-url: ../../
---

[toc]

## 배열이란?

- 배열은 특정 크기의 메모리를 나란히 나열한 형태를 띠고 있습니다.
- 배열 변수의 명은 배열의 첫번째 메모리 공간을 가리킵니다.
- 배열의 [] 연산자는 *(역참조) 연산자와 동일한 역할을 합니다.

~~~cpp
int arr[5] = { 0, 1, 2, 3, 4 }
arr[3];// 배열 arr의 첫번째 메모리 주소에서 +3한 주소의 메모리 공간을 역참조합니다.
// arr[3] 은 *(arr + 3) 와 동일합니다.
~~~

### 2차원 배열의 활용

- 미리 계산된 값을 저장 및 Lookup 테이블로 많이 활용
- 이것을 3D 프로그래밍에서는 베이킹이라고 부릅니다.
- SIN, COS 함수로 미리 계산해서 사용합니다. 0 ~ 360 모든 각도를 라디안으로 계산해서 Lookup 테이블에 저장해놓고 인덱스만 대입하면 원하는 라디안 값이 튀어나옵니다.
- 길찾기에서도 많이 사용하는데 Way Point 라고 부릅니다.

#### 2D RPG 게임에서 타일 방식으로 맵을 구현할 때 활용

- 이미지 리소스를 줄이기 위한 방식 이었으나, 로직에도 사용했습니다.
- 타일 한 칸이 구조체 인스턴스 한 개와 매칭 됩니다.
- 구조체 인스턴스에는 유저, 몬스터, 아이템과 같은 정보들이 저장됩니다.
- 유저 또는 몬스터가 이동하면, 이동 전의 타일에 저장된 정보를 이동 후의 타일로 옮기는 방식을 사용했습니다.

#### 2차원 배열을 활용한 AI

- AI는 조건문의 덩어리이다.
- 조건을 쉽게 관리하고 조건을 쉽게 만들어내는 것이 중요하다.

~~~cpp
int dimension[5][3][6][5][7];
//        |내 HP|적 HP|거리|아군|지역|
//        5 * 3 * 6 * 5 * 7 갯수의 조건을 나타냅니다.
//       위의 속성 값을 배열 인덱스에 넣으면 정의된 로직이 바로 실행되는 방식입니다.
//       단점은 모든 케이스를 일일이 따져서 배열에 넣어주어야 합니다.
~~~

위의 방법으로 전략 시뮬레이션 AI를 많이 구현하였습니다. 스타크래프트 초기 버전에서도 사용하였습니다. 적 유인, 공격, 거의 대부분의 AI 행동 패턴을 구현할 수 있습니다.

