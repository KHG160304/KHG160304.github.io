---
title: (1) 컴퓨터 시스템의 기본
excerpt: CPU, 레지스터, 메모리, 어셈블리어에 대해 알아보자
categories: 
  - 게임서버 과정
permalink: /game-server-curriculum/:title
toc: true
toc_sticky: true
typora-root-url: ../../
---

[toc]

## CPU 란?

기계어로된 명령어 코드를 해석하고 실행하는 디지털 회로 입니다.

![컴퓨터 구조와 원리](/images/2024-12-18-컴퓨터 시스템의 기본/컴퓨터 구조와 원리.png)
(사진 출처: 컴퓨터 구조와 원리, 신종홍 저, 한빛미디어, 2011)



## 레지스터란?

CPU 내부의 구성요소 중 하나로, CPU가 메모리에서 읽어 들인 명령어 처리에 사용되는 데이터를 임시로 저장하는데 사용됩니다. 모든 연산을 레지스터를 대상으로 동작합니다. 레지스터는 값이 비싼 자원이며 저장할 수 있는 데이터의 양이 매우 작습니다.



## 레지스터의 종류

다양한 종류의 레지스터가 존재합니다.

1. ebp: 스택 메모리의 시작 주소를 가지고 있습니다.
2. esp: 스택 메모리에서 데이터를 추가할 때, 저장될 메모리의 시작 주소를 가지고 있습니다.
3. eax: 산술, 논리 연산에 사용됩니다. 함수의 반환 값을 저장하는 공간으로도 사용됩니다.
4. ecx: 보통 명령어를 반복 실행할 때 실행 횟수를 셀 목적으로 사용합니다.
5. esi: 메모리 복사를 실행할 때 원본 데이터의 주소를 저장하는데 사용합니다.
6. edi: 메모리 복사를 실행할 때 목적지 메모리의 주소를 저장하는데 사용합니다.
7. eip: cpu가 바로 다음에 실행할 명령어의 시작 주소를 저장하는데 사용합니다.

> ebp, esp, eip는 설명한 목적 이외의 다른 목적으로는 사용되지 않습니다.
> eax, ecx, esi, edi 는 범용 레지스터로 설명한 목적 이외에 다른 용도로 사용될 수 있습니다.



## 메모리

보조기억장치에 저장된 프로그램을 실행시켰을 때 사용되는 장치입니다. 보조기억장치에 저장된 프로그램의 모든 데이터를 메모리 장치에 읽어 들입니다. 메모리의 성능은 레지스터와 보조기억장치 사이에 위치하며 보조기억장치보다 데이터를 읽고 쓰는 성능이 빨라서 현재 실행 중인 프로그램의 모든 정보를 저장합니다.



## 기계어란?

2진수(1, 0)로 구성된 형태의 명령어 입니다. CPU가 해석하고 실행하는 명령어입니다.
머신코드라고도 부릅니다.



## 어셈블리어란?

기계어(머신코드)를 사람이 이해할 수 있는 단순한 단어로 치환한 언어입니다.
기계어와 1:1로 매칭이 됩니다.

ex) 1011(기계어) : mov(어셈블리어)



## 어셈블리 명령어의 종류

1. push data  
   data라는 정보를 esp가 가리키는 스택 메모리의 공간에 저장합니다.
2. pop eax  
   esp가 가리키는 스택 메모리의 공간에 저장된 정보를 eax 레지스터로 옮겨옵니다.
   그리고 esp는 스택 메모리에서 바로 이전에 push 된 데이터가 저장된 메모리 공간을 가리킵니다.
3. lea(load effective address) [1] [2]  
   [2]의 메모리 주소값을 [1]로 읽어들입니다. 무조건 주소값을 읽어들이는데 사용됩니다.
4. mov [1], [2]  
   [2] 저장된 값을 [1]이 가리키는 메모리 공간으로 복사합니다.
6. add [1], [2]  
   [1]에 저장된 값과 [2]에 저장된 값을 더하여, [1]이 나타내는 공간에 덧셈 결과를 저장합니다.
7. dword ptr [ebp-12h]  
   point to double word data at address(value of ebp-12h)
8. call [a1]  
   call [a1] 바로 다음에 실행될 명령어의 주소를 스택 메모리에 push 합니다. 그리고 [a1] 주소위치에 있는 함수로 점프합니다.
9. test [a1], [a2]  
   a1 과 a2를 and 연산하여 결과가 0인지 아닌지 판별합니다. 0 이면 ZF(zero flag) 레지스터에 값을 1로 세팅하고 아니면 0으로 세팅합니다.
10. cmp [a1], [a2]  
      a1에서 a2를 뺍니다. 결과값이 0이면 ZF 레지스터 값을 1로 세팅합니다. a2 값이 더 크면 CF 레지스터를 1로 세팅합니다. a1이 더 크면 플래그 레지스터의 값 변경이 없습니다.
11. ja, jb, jae, jbe  
    unsigned 타입 자료형 연산시에 사용하는 jump 명령어들
    보통 cmp 명령어와 같이 쓰인다.
    jump if above, jump if below, jump if above or equal, jump if below or equal 
12. jg, jl, jge, jle  
    signed 타입 자료형 연산시에 사용하는 jump 명령어들
    보통 cmp 명령어와 같이 쓰인다.
    jump if greater, jump if less, jump if greater or equal, jump if less or equal
13. je, jne  
    부호 여부 상관없이 사용되는 jump 명령어 입니다.
    보통 cmp 명령어와 같이 쓰인다.
    jump if equal, jump if not equal
